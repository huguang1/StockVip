function Stock(){this.isWeihu=$("#is_weihu")}Stock.prototype.editGainEvent=function(){var l,r=$("#edit-valid_bet"),d=$("#edit-grade_one"),s=$("#edit-grade_two"),v=$("#edit-grade_three"),u=$("#edit-grade_four"),p=$("#edit-grade_five");$(".edit-gain-btn").click(function(){l=$(this).parent("td.brand-manage"),r.val(l.prevAll(".gain-valid-bet").text()),d.val(l.prevAll(".gain-grade-one").text()),s.val(l.prevAll(".gain-grade-two").text()),v.val(l.prevAll(".gain-grade-three").text()),u.val(l.prevAll(".gain-grade-four").text()),p.val(l.prevAll(".gain-grade-five").text()),layer.open({type:1,title:"个人股价增益编辑",closeBtn:1,anim:2,area:["800px","400px"],shadeClose:!0,content:$("#edit-gain-tan")})}),$("#edit-gain-submit-btn").click(function(){var e=r.val(),t=d.val(),i=s.val(),a=v.val(),n=u.val(),o=p.val(),c=l.prevAll(".gain-id").text();e&&t&&i&&a&&n?stockajax.put({url:"/stock/personal/",data:{valid_bet:e,grade_one:t,grade_two:i,grade_three:a,grade_four:n,grade_five:o,gain_id:c},success:function(e){200===e.code&&(layer.closeAll(),layer.msg("个人股价增益编辑成功!",{icon:1,time:1e3},function(){window.location=window.location.href}))}}):layer.msg("值不能为空",{icon:2,time:1e3})})},Stock.prototype.deleteGainEvent=function(){$(".del-gain-btn").click(function(){var e=$(this).attr("data-del");layer.confirm("确定要删除？",{btn:["确定","取消"]},function(){e?stockajax.delete({url:"/stock/personal/",data:{gain_id:e},success:function(e){200===e.code&&layer.msg("删除成功!",{icon:1,time:1e3},function(){window.location=window.location.href})}}):(layer.closeAll(),layer.msg("删除失败!",{icon:2,time:1e3},function(){layer.closeAll()}))},function(){layer.closeAll()})})},Stock.prototype.addGainEvent=function(){var c=$("#valid_bet"),l=$("#grade_one"),r=$("#grade_two"),d=$("#grade_three"),s=$("#grade_four"),v=$("#grade_five");$("#add-gain-btn").click(function(){c.val(),l.val(),r.val(),d.val(),s.val(),v.val(),layer.open({type:1,title:"个人股价增益添加",closeBtn:1,anim:2,area:["800px","400px"],shadeClose:!0,content:$("#add-gain-tan")})}),$("#add-gain-submit-btn").click(function(){var e=c.val(),t=l.val(),i=r.val(),a=d.val(),n=s.val(),o=v.val();e&&t&&i&&a&&n?stockajax.post({url:"/stock/personal/",data:{valid_bet:e,grade_one:t,grade_two:i,grade_three:a,grade_four:n,grade_five:o},success:function(e){200===e.code&&(layer.closeAll(),layer.msg("个人股价增益添加成功!",{icon:1,time:1e3},function(){window.location=window.location.href}))}}):layer.msg("值不能为空",{icon:2,time:1e3})})},Stock.prototype.addPriceEvent=function(){var i=$("#auth_price"),a=$("#add_time");$("#add-price").click(function(){i.val(),a.val(),layer.open({type:1,title:"官方股价添加",closeBtn:1,anim:2,area:["800px","400px"],shadeClose:!0,content:$("#add-price-tan")})}),$("#add-price-submit-btn").click(function(){var e=a.val(),t=i.val();e?t?stockajax.post({url:"/stock/official/",data:{add_time:e,price:t},success:function(e){layer.closeAll(),200===e.code&&layer.msg("官方报价添加成功!",{icon:1,time:1e3},function(){window.location=window.location.href})}}):layer.msg("请输入报价",{icon:2,time:1e3}):layer.msg("请选择时间",{icon:2,time:1e3})})},Stock.prototype.editPriceEvent=function(){var t,i=$("#edit-auth_price"),e=$("#show-add_time");$(".edit-price-btn").click(function(){t=$(this).parent("td.td-manage"),e.text(t.prevAll(".price-add_time").text()),i.val(t.prevAll(".price-price").text()),layer.open({type:1,title:"官方股价编辑",closeBtn:1,anim:2,area:["800px","400px"],shadeClose:!0,content:$("#edit-price-tan")})}),$("#edit-price-submit-btn").click(function(){var e=i.val();e?stockajax.put({url:"/stock/official/",data:{price_id:t.prevAll(".price-id").text(),price:e},success:function(e){200===e.code&&(layer.closeAll(),layer.msg("官方股价编辑成功!",{icon:1,time:1e3},function(){window.location=window.location.href}))}}):layer.msg("请输入股价",{ico:2})})},Stock.prototype.deletePriceEvent=function(){$(".del-price-btn").click(function(){var e=$(this).attr("data-id");layer.confirm("确定要删除？",{btn:["确定","取消"]},function(){e?stockajax.delete({url:"/stock/official/",data:{price_id:e},success:function(e){200===e.code&&layer.msg("删除官方报价成功!",{icon:1,time:1e3},function(){window.location=window.location.href})}}):(layer.closeAll(),layer.msg("删除官方报价失败!",{icon:2,time:1e3},function(){layer.closeAll()}))},function(){layer.closeAll()})})},Stock.prototype.listenSetTimeEvent=function(){var l=this;$("#btn-tf").click(function(){var e=$("#start_time").val(),t=$("#end_time").val(),i=$("#close_desc").val(),a=$("#start1").val(),n=$("#end1").val(),o=l.isWeihu.bootstrapSwitch("status"),c=$("#weihu_desc").val();stockajax.post({url:"/stock/transaction/",data:{start_time:e,end_time:t,is_maintain:o,maintain_desc:c,start_a:a,end_a:n,close_desc:i},success:function(e){200===e.code&&layer.msg("股市时间设置成功!",{icon:1,time:1e3},function(){window.location=window.location.href})}})})},Stock.prototype.run=function(){this.listenSetTimeEvent(),this.addGainEvent(),this.deleteGainEvent(),this.editGainEvent(),this.addPriceEvent(),this.deletePriceEvent(),this.editPriceEvent()},$(function(){(new Stock).run()});