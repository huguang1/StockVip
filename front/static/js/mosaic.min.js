function MosaicAssets(){this.tabAssets=$(".tab-assets"),this.tabAssets.find("li").first().addClass("cut"),this.category=this.tabAssets.find("li").first().attr("data-id"),this.username=""}function MosaicBuyDetails(){this.tabBuy=$(".tab-buy"),this.tabBuy.find("li").first().addClass("cut"),this.category=this.tabBuy.find("li").first().attr("data-id"),this.username="",this.date=""}function MosaicSellDetails(){this.tabSell=$(".tab-sell"),this.tabSell.find("li").first().addClass("cut"),this.category=this.tabSell.find("li").first().attr("data-id"),this.username="",this.date=""}function MosaicLotteryReceiptDetails(){this.tabLotteryReceiptDetails=$(".tab-lrd"),this.tabLotteryReceiptDetails.find("li").first().addClass("cut"),this.category=this.tabLotteryReceiptDetails.find("li").first().attr("data-id"),this.username="",this.start_time="",this.end_time=""}MosaicAssets.prototype.deleteAssetsEvent=function(){var t=this;$("#assets-btnDel").click(function(){layer.confirm("确定要删除所有用户资产？",{btn:["确定","取消"]},function(){t.category?(layer.msg("正在删除.....",{icon:16,time:1e8}),stockajax.delete({url:"/mosaic/assets/",data:{category:t.category},success:function(t){200===t.code&&(layer.closeAll(),layer.msg("删除成功!",{icon:1,time:1e3},function(){window.location=window.location.href}))}})):(layer.closeAll(),layer.msg("删除失败!",{icon:2,time:1e3},function(){layer.closeAll()}))},function(){layer.closeAll()})})},MosaicAssets.prototype.ouputDateEvent=function(){var t=this;$("#assets-btnExport").click(function(){window.open("/mosaic/memberassetcsv/?category="+t.category)})},MosaicAssets.prototype.listenCategoryEvent=function(){var c=this;$(".tab-assets li").click(function(){var t=$(this);t.addClass("cut").siblings().removeClass("cut"),c.category=parseInt(t.attr("data-id")),stockajax.get({url:"/mosaic/assetslist/",data:{category:c.category},success:function(t){if(200===t.code){var e=t.data,a=template("asset-item",{data:e.data}),s=$(".asset-tbody");s.empty(),s.append(a);var i=e.pages_parm,n=template("page-item",i),o=$("#assets-page-box");o.empty(),o.append(n),$("#assets-total_count").text(e.count),c.listenPageEvent()}}})})},MosaicAssets.prototype.listenPageEvent=function(){var c=this;$(".page-btn").click(function(){var t=$(this).attr("data-p");t&&stockajax.get({url:"/mosaic/assetslist/",data:{category:c.category,p:t,username:c.username},success:function(t){if(200===t.code){var e=t.data,a=template("asset-item",{data:e.data}),s=$(".asset-tbody");s.empty(),s.append(a);var i=e.pages_parm,n=template("page-item",i),o=$("#assets-page-box");o.empty(),o.append(n),$("#assets-total_count").text(e.count),c.listenPageEvent()}}})})},MosaicAssets.prototype.sourchBtnEvent=function(){var c=this;$("#assets-btnQuery").click(function(){if(c.username=$("#assets_user_name").val(),!c.username)return layer.msg("请输入用户名",{icon:2,time:1e3}),null;stockajax.get({url:"/mosaic/assetslist/",data:{category:c.category,username:c.username},success:function(t){if(200===t.code){var e=t.data,a=template("asset-item",{data:e.data}),s=$(".asset-tbody");s.empty(),s.append(a);var i=e.pages_parm,n=template("page-item",i),o=$("#assets-page-box");o.empty(),o.append(n),$("#assets-total_count").text(e.count),c.listenPageEvent()}}})})},MosaicAssets.prototype.run=function(){this.listenCategoryEvent(),this.listenPageEvent(),this.ouputDateEvent(),this.sourchBtnEvent(),this.deleteAssetsEvent()},MosaicBuyDetails.prototype.listenPageEvent=function(){var c=this;$(".page-btn").click(function(){var t=$(this).attr("data-p");t&&stockajax.get({url:"/mosaic/buydtllist/",data:{category:c.category,p:t,user:c.username,date:c.date},success:function(t){if(200===t.code){var e=t.data,a=template("buy-item",{data:e.data}),s=$(".buy-tbody");s.empty(),s.append(a);var i=e.pages_parm,n=template("page-item",i),o=$("#buy-page-box");o.empty(),o.append(n),$("#buy-total_count").text(e.count),c.listenPageEvent()}}})})},MosaicBuyDetails.prototype.listenCategoryEvent=function(){var c=this;$(".tab-buy li").click(function(){var t=$(this);t.addClass("cut").siblings().removeClass("cut"),c.category=parseInt(t.attr("data-id")),stockajax.get({url:"/mosaic/buydtllist/",data:{category:c.category},success:function(t){if(200===t.code){var e=t.data,a=template("buy-item",{data:e.data}),s=$(".buy-tbody");s.empty(),s.append(a);var i=e.pages_parm,n=template("page-item",i),o=$("#buy-page-box");o.empty(),o.append(n),$("#buy-total_count").text(e.count),c.listenPageEvent()}}})})},MosaicBuyDetails.prototype.searchBtnEvent=function(){var c=this;$("#buy-btnQuery").click(function(){c.username=$("#buy_user_name").val(),c.date=$("#buy_add_time").val(),stockajax.get({url:"/mosaic/buydtllist/",data:{category:c.category,date:c.date,user:c.username},success:function(t){if(200===t.code){var e=t.data,a=template("buy-item",{data:e.data}),s=$(".buy-tbody");s.empty(),s.append(a);var i=e.pages_parm,n=template("page-item",i),o=$("#buy-page-box");o.empty(),o.append(n),$("#buy-total_count").text(e.count),c.listenPageEvent()}}})})},MosaicBuyDetails.prototype.deleteBuyBtnEvent=function(){var t=this;$("#buy-btnDel").click(function(){layer.confirm("确定要删除所有会员买入明细数据？",{btn:["确定","取消"]},function(){t.category?(layer.msg("正在删除.....",{icon:16,time:1e8}),stockajax.delete({url:"/mosaic/buydtl/",data:{category:t.category},success:function(t){200===t.code&&(layer.closeAll(),layer.msg("删除成功!",{icon:1,time:1e3},function(){window.location=window.location.href}))}})):(layer.closeAll(),layer.msg("删除失败!",{icon:2,time:1e3},function(){layer.closeAll()}))},function(){layer.closeAll()})})},MosaicBuyDetails.prototype.run=function(){this.deleteBuyBtnEvent(),this.listenCategoryEvent(),this.listenPageEvent(),this.searchBtnEvent()},MosaicSellDetails.prototype.listenPageEvent=function(){var c=this;$(".page-btn").click(function(){var t=$(this).attr("data-p");t&&stockajax.get({url:"/mosaic/selldtllist/",data:{category:c.category,p:t,username:c.username},success:function(t){if(200===t.code){var e=t.data,a=template("sell-item",{data:e.data}),s=$(".sell-tbody");s.empty(),s.append(a);var i=e.pages_parm,n=template("page-item",i),o=$("#sell-page-box");o.empty(),o.append(n),$("#sell-total_count").text(e.count),c.listenPageEvent()}}})})},MosaicSellDetails.prototype.listenCategoryEvent=function(){var c=this;$(".tab-sell li").click(function(){var t=$(this);t.addClass("cut").siblings().removeClass("cut"),c.category=parseInt(t.attr("data-id")),stockajax.get({url:"/mosaic/selldtllist/",data:{category:c.category},success:function(t){if(200===t.code){var e=t.data,a=template("sell-item",{data:e.data}),s=$(".sell-tbody");s.empty(),s.append(a);var i=e.pages_parm,n=template("page-item",i),o=$("#sell-page-box");o.empty(),o.append(n),$("#sell-total_count").text(e.count),c.listenPageEvent()}}})})},MosaicSellDetails.prototype.searchBtnEvent=function(){var c=this;$("#sell-btnQuery").click(function(){c.username=$("#sell-user_name").val(),c.date=$("#sell-add_time").val(),console.log(c.username,c.date,c.category),stockajax.get({url:"/mosaic/selldtllist/",data:{category:c.category,date:c.date,user:c.username},success:function(t){if(200===t.code){var e=t.data,a=template("sell-item",{data:e.data}),s=$(".sell-tbody");s.empty(),s.append(a);var i=e.pages_parm,n=template("page-item",i),o=$("#sell-page-box");o.empty(),o.append(n),$("#sell-total_count").text(e.count),c.listenPageEvent()}}})})},MosaicSellDetails.prototype.deleteSellBtnEvent=function(){var t=this;$("#sell-btnDel").click(function(){layer.confirm("确定要删除所有会员卖出明细数据？",{btn:["确定","取消"]},function(){t.category?(layer.msg("正在删除.....",{icon:16,time:1e8}),stockajax.delete({url:"/mosaic/selldtl/",data:{category:t.category},success:function(t){200===t.code&&(layer.closeAll(),layer.msg("删除成功!",{icon:1,time:1e3},function(){window.location=window.location.href}))}})):(layer.closeAll(),layer.msg("删除失败!",{icon:2,time:1e3},function(){layer.closeAll()}))},function(){layer.closeAll()})})},MosaicSellDetails.prototype.run=function(){this.deleteSellBtnEvent(),this.listenCategoryEvent(),this.listenPageEvent(),this.searchBtnEvent()},MosaicLotteryReceiptDetails.prototype.ouputDateEvent=function(){var a=this;$("#lrd-btnExport").click(function(){var t=$("#ipt_start_time").val(),e=$("#ipt_end_time").val();t&&e?window.open("/mosaic/lotteryreceiptcsv/?category="+a.category+"&start_time="+t+"&end_time="+e):layer.msg("请选择时间",{icon:2,time:1e3})})},MosaicLotteryReceiptDetails.prototype.payoutEvent=function(){$(".payout-btn").click(function(){var t=$(this).parent("td.td-manage").prevAll(".receipt-id").attr("data-receipt-id");layer.confirm("确定要派彩吗？",{btn:["确定","取消"]},function(){t?stockajax.put({url:"/mosaic/receiptdtl/",data:{receipt_id:t},success:function(t){200===t.code&&layer.msg("派彩成功",{icon:1,time:1e3},function(){window.location=window.location.href})}}):layer.msg("派彩失败, 请刷新数据重试",{icon:2,time:1e3},function(){layer.closeAll()})},function(){layer.closeAll()})})},MosaicLotteryReceiptDetails.prototype.deleteLrdBtnEvent=function(){var t=this;$("#lrd-btnDel").click(function(){layer.confirm("确定要删除所有用户彩金领取明细数据？",{btn:["确定","取消"]},function(){t.category?(layer.msg("正在删除.....",{icon:16,time:1e8}),stockajax.delete({url:"/mosaic/receiptdtl/",data:{category:t.category},success:function(t){200===t.code&&(layer.closeAll(),layer.msg("删除成功!",{icon:1,time:1e3},function(){window.location=window.location.href}))}})):(layer.closeAll(),layer.msg("删除失败!",{icon:2,time:1e3},function(){layer.closeAll()}))},function(){layer.closeAll()})})},MosaicLotteryReceiptDetails.prototype.listenPageEvent=function(){var c=this;$(".page-btn").click(function(){var t=$(this).attr("data-p");t&&stockajax.get({url:"/mosaic/receiptdtllist/",data:{category:c.category,p:t,start_time:c.start_time,end_time:c.end_time,user:c.username},success:function(t){if(200===t.code){var e=t.data,a=template("lrd-item",{data:e.data}),s=$(".lrd-tbody");s.empty(),s.append(a);var i=e.pages_parm,n=template("page-item",i),o=$("#lrd-page-box");o.empty(),o.append(n),$("#lrd-total_count").text(e.count),c.listenPageEvent()}}})})},MosaicLotteryReceiptDetails.prototype.listenCategoryEvent=function(){var c=this;$(".tab-lrd li").click(function(){var t=$(this);t.addClass("cut").siblings().removeClass("cut"),c.category=parseInt(t.attr("data-id")),stockajax.get({url:"/mosaic/receiptdtllist/",data:{category:c.category},success:function(t){if(200===t.code){var e=t.data,a=template("lrd-item",{data:e.data}),s=$(".lrd-tbody");s.empty(),s.append(a);var i=e.pages_parm,n=template("page-item",i),o=$("#lrd-page-box");o.empty(),o.append(n),$("#lrd-total_count").text(e.count),c.listenPageEvent()}}})})},MosaicLotteryReceiptDetails.prototype.searchBtnEvent=function(){var c=this;$("#lrd-btnQuery").click(function(){c.username=$("#lrd-user_name").val(),c.start_time=$("#lrd-start_time").val(),c.end_time=$("#lrd-end_time").val(),stockajax.get({url:"/mosaic/receiptdtllist/",data:{category:c.category,start_time:c.start_time,end_time:c.end_time,user:c.username},success:function(t){if(200===t.code){var e=t.data,a=template("lrd-item",{data:e.data}),s=$(".lrd-tbody");s.empty(),s.append(a);var i=e.pages_parm,n=template("page-item",i),o=$("#lrd-page-box");o.empty(),o.append(n),$("#lrd-total_count").text(e.count),c.listenPageEvent()}}})})},MosaicLotteryReceiptDetails.prototype.run=function(){this.ouputDateEvent(),this.payoutEvent(),this.deleteLrdBtnEvent(),this.listenPageEvent(),this.searchBtnEvent(),this.listenCategoryEvent()};