function getCookie(t){var e=null;if(document.cookie&&""!==document.cookie)for(var o=document.cookie.split(";"),n=0;n<o.length;n++){var i=jQuery.trim(o[n]);if(i.substring(0,t.length+1)===t+"="){e=decodeURIComponent(i.substring(t.length+1));break}}return e}var stockajax={get:function(t){t.method="get",this.ajax(t)},delete:function(t){t.method="delete",this._ajaxSetup(),this.ajax(t)},post:function(t){t.method="post",this._ajaxSetup(),this.ajax(t)},put:function(t){t.method="put",this._ajaxSetup(),this.ajax(t)},ajax:function(t){var i=t.success;t.success=function(t){if(200===t.code)i&&i(t);else{var e=t.message;if(e)if("string"==typeof e||e.constructor===String)layer.msg(e,{icon:2,time:1e3},function(){window.location=window.location.href});else for(var o in e){var n=e[o][0];layer.msg(n,{icon:2,time:1e3},function(){window.location=window.location.href})}i&&i(t)}},t.fail=function(t){console.log(t),layer.msg("服务器内部错误！",{icon:2,time:1e3},function(){window.location=window.location.href})},$.ajax(t)},_ajaxSetup:function(){$.ajaxSetup({cache:!1,beforeSend:function(t,e){/^(GET|HEAD|OPTIONS|TRACE)$/.test(e.type)||this.crossDomain||t.setRequestHeader("X-CSRFToken",getCookie("csrftoken"))}})}};